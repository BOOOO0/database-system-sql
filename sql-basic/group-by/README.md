# GROUP BY

- `GROUP BY`절은 데이터를 그룹화한 결과를 조회할 때 사용합니다.

## 그룹화

- 그룹화의 의미를 단어 자체보다 그룹화라는 작업을 통해서 얻는 결과에 대해 집중하는 것이 이해에 도움이 될 것 같습니다.

- 우리는 집계 함수와 `GROUP BY`절을 통해서 행 데이터들의 집계치, 혹은 통계치를 얻어서 한 회원이 지금까지 구매한 물건의 수, 한 회원이 지금까지 구매에 사용한 금액 등을 얻을 수 있습니다.

- 그룹화의 의미보다 그룹화를 통해서 얻는 결과에 집중하고 `GROUP BY`와 집계 함수를 결과를 얻기 위한 수단으로 공부하는 것이 이해가 더 쉬울 것 같습니다.

## GROUP BY 사용하기

- `GROUP BY [그룹화 대상 열 이름]`의 규칙으로 사용합니다.

- `집계 함수`와 함께 사용해서 데이터를 그룹화하여 얻고자 하는 결과를 얻을 수 있습니다.

- 구매에 대한 테이블에서 각 회원이 구매한 양에대해 조회를 한다면 다음과 같이 조회할 수 있습니다.

  ```SQL
  SELECT
    mem_id, amout
  FROM
    buy
  ORDER BY
    mem_id;
  ```

  하지만 위와 같이 조회를 했을 경우에는 집계를 직접 해야 하기 때문에 `GROUP BY`와 집계 함수를 사용하면 좋습니다.

  ```SQL
  SELECT
    mem_id, SUM(amout)
  FROM
    buy
  GROUP BY
    mem_id;
  ```

  위 쿼리문은 mem_id 열에서 같은 mem_id 값을 가진 데이터들의 amount를 합산한 값으로 그룹화한다는 의미입니다.
  |mem_id|amount|
  |:-:|:-:|
  |BLK|2|
  |BLK|3|

  위 테이블이
  |mem_id|amount|
  |:-:|:-:|
  |BLK|5|

  이렇게 그룹화가 되는 것입니다.

## 더 많은 연산

- 집계 함수에 더 많은 연산을 추가해서 다양한 집계치로 데이터를 그룹화할 수 있습니다.

- 한 회원이 지금까지 구매에 사용한 금액을 조회하고 싶다면 다음과 같이 쿼리문을 작성할 수 있습니다.
  ```SQL
  SELECT
    mem_id, SUM(price * amount)
  FROM
    buy
  GROUP BY
    mem_id;
  ```
  한 물품을 몇 개 구매했는지 그리고 그 물품의 가격이 얼마인지를 곱한 다음 그것을 합산합니다. 그리고 그 합산한 값으로 mem_id에서 같은 값을 가진 값들을 그룹화합니다.
