# JOIN

- `JOIN`은 두개의 테이블을 묶는 쿼리문입니다.

- 실습에서 회원 테이블과 구매 테이블을 각각 조회하고 사용했습니다. `join`을 사용하면 두 테이블을 엮어서 배송을 위한 정보를 추출해서 배송 정보에 대한 결과를 만들어 낼 수 있습니다.

## 일대다 관계 (one to many)

- 테이블의 조인을 위해서는 테이블이 일대다 관계로 연결되어야 합니다.

- 일대다 관계를 예시로 설명하면 회원 테이블의 주요 키는 회원 아이디이고 회원 아이디는 구매 테이블의 열 중 하나이기도 합니다. 하지만 회원 테이블에서의 회원 아이디는 주요 키로 단 하나의 값만을 가지고 구매 테이블에서의 회원 아이디는 외래 키로 설정되고 한 아이디가 여러번 열에 나타날 수 있습니다. 이것을 일대다 관계라고 하고 `PK-FK`관계라고도 합니다.

## 내부 조인(inner join)

- 일반적으로 조인은 내부 조인을 의미합니다. `JOIN`쿼리문을 써도 `INNER JOIN`으로 인식합니다.

- 사용방법은 다음과 같습니다.

  ```SQL
  SELECT [열1, 열2, ...]
  FROM [첫번쨰 테이블 이름]
    INNER JOIN [두번째 테이블 이름]
    ON [조인될 조건]
  ```

- 두 테이블을 엮어서 새로운 결과를 얻었습니다.

  ```SQL
  SELECT *
  FROM buy
  	INNER JOIN member
        ON buy.mem_id = member.mem_id;
  ```

  특정 회원의 정보만을 얻으려면 다음과 같이 `WHERE`조건문을 사용할 수도 있습니다.

  ```SQL
  SELECT *
  FROM buy
  	INNER JOIN member
        ON buy.mem_id = member.mem_id
        WHERE buy.mem_id = 'BLK';
  ```

- 그리고 앞서 말했던 회원 아이디는 회원 테이블, 구매 테이블 모두 열 이름이 `mem_id`입니다. 따라서 조회할 열을 고를 때 어떤 테이블의 `mem_id`인지를 명시해 주어야 오류가 발생하지 않습니다.

- 위의 예시는 모든 열을 조회했습니다. 좀 더 구매 정보에 대한 테이블처럼 조회를 해보겠습니다.
  ```SQL
  SELECT buy.mem_id, mem_name, prod_name, addr, CONCAT(phone1,phone2) AS '연락처'
  FROM buy
  	INNER JOIN member
        ON buy.mem_id = member.mem_id;
  ```
  내부 조인을 통해 회원 아이디, 이름, 구매한 물품, 주소, 연락처를 가진 구매 정보 테이블을 조회했습니다.

## 내부 조인의 한계

- 내부 조인의 한계는 현재 구매를 한 회원들만 조회가 되는 것입니다. 구매를 하지 않은 고객은 구매한 기록이 없음으로 조회가 되도록 외부 조인을 사용할 수 있습니다.

- 다시 말하면 내부 조인은 양쪽 테이블에 동시에 존재하는 데이터만을 조회하고 외부 조인은 그 외의 데이터도 조회할 수 있습니다.

- **_이것이 내부 조인보다 외부 조인이 더 성능이 좋다는 의미가 아닙니다._**
